{"ast":null,"code":"export default class FilmApiService {\n  constructor() {\n    this.BasePath = 'http://localhost:64303';\n    this.Controller = 'Films';\n    this.Id = 'Random';\n\n    this.GetRandomFilm = () => {\n      let result = {\n        id: null,\n        title: null\n      }; //Работющий запрос\n\n      fetch(\"http://localhost:64303/api/Films/Random\", {\n        method: 'GET',\n        mode: 'cors'\n      }).then(res => res.json()).then(resultRequest => {\n        //console.log(resultRequest);\n        result = {\n          id: resultRequest.id,\n          title: resultRequest.title,\n          duaration: resultRequest.duaration,\n          genre: resultRequest.genre,\n          description: resultRequest.description,\n          year: resultRequest.year,\n          director: resultRequest.director,\n          urlImg: resultRequest.urlImg,\n          urlTrailer: resultRequest.urlTrailer //console.log(result);\n\n        };\n      }, // Note: it's important to handle errors here\n      // instead of a catch() block so that we don't swallow\n      // exceptions from actual bugs in components.\n      error => {\n        console.log(error);\n      });\n      console.log(result);\n      return result;\n    };\n\n    this.getResource = async (controller = this.Controller, id = '') => {\n      let res = await fetch(\"\".concat(this.BasePath, \"/api/\").concat(controller, \"/\").concat(id), {\n        method: 'GET',\n        mode: 'cors'\n      }).then(res => res.json()).then(result => {\n        console.log(result);\n      }, // Note: it's important to handle errors here\n      // instead of a catch() block so that we don't swallow\n      // exceptions from actual bugs in components.\n      error => {\n        console.log(error);\n      }); //if (!res.ok) {\n      //    throw Error(`Could not fetch ${this.BasePath}` +\n      //        `, received ${res.status}`)\n      //}\n\n      return await res;\n    };\n  }\n\n  async getAllFilms() {\n    const res = await this.getResource('Films');\n    return res.results.map(this._transformFilm);\n  }\n\n  async getFilmById(id) {\n    const film = await this.getResource(this.Controller, id);\n    return this._transformFilm(film);\n  }\n\n  async getRandomFilm() {\n    const film = await this.getResource(this.Controller, 'Random');\n    return film; //this._transformFilm(film);\n  }\n\n  _transformFilm(film) {\n    return {\n      id: film.id,\n      title: film.title,\n      duaration: film.duaration,\n      genre: film.genre,\n      description: film.description,\n      year: film.year,\n      director: film.director,\n      urlImg: film.urlImg,\n      urlTrailer: film.urlTrailer\n    };\n  }\n\n}","map":{"version":3,"sources":["C:\\Users\\Anton\\projects\\randomfilm_frontend\\src\\services\\FilmApiService.js"],"names":["FilmApiService","BasePath","Controller","Id","GetRandomFilm","result","id","title","fetch","method","mode","then","res","json","resultRequest","duaration","genre","description","year","director","urlImg","urlTrailer","error","console","log","getResource","controller","getAllFilms","results","map","_transformFilm","getFilmById","film","getRandomFilm"],"mappings":"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","sourcesContent":["export default class FilmApiService {\r\n\r\n    BasePath = 'http://localhost:64303';\r\n    Controller = 'Films'\r\n    Id = 'Random';\r\n\r\n    GetRandomFilm = () => {\r\n        let result = {\r\n            id: null,\r\n            title: null\r\n        };\r\n        //Работющий запрос\r\n        fetch(\"http://localhost:64303/api/Films/Random\", {\r\n            method: 'GET',\r\n            mode: 'cors'})\r\n\r\n            .then(res => res.json())\r\n            .then((resultRequest) => {\r\n                    //console.log(resultRequest);\r\n                    result = {\r\n                        id: resultRequest.id,\r\n                        title: resultRequest.title,\r\n                        duaration: resultRequest.duaration,\r\n                        genre: resultRequest.genre,\r\n                        description: resultRequest.description,\r\n                        year: resultRequest.year,\r\n                        director: resultRequest.director,\r\n                        urlImg: resultRequest.urlImg,\r\n                        urlTrailer: resultRequest.urlTrailer\r\n                    }\r\n                    //console.log(result);\r\n                },\r\n                // Note: it's important to handle errors here\r\n                // instead of a catch() block so that we don't swallow\r\n                // exceptions from actual bugs in components.\r\n                (error) => {\r\n                    console.log(error);\r\n                }\r\n            )\r\n        console.log(result);\r\n        return result;\r\n    }\r\n\r\n    getResource = async(controller = this.Controller, id = '') => {\r\n        let res = await fetch(`${this.BasePath}/api/${controller}/${id}`, {\r\n            method: 'GET',\r\n            mode: 'cors'})\r\n\r\n            .then(res => res.json())\r\n            .then((result) => {\r\n                    console.log(result);\r\n                },\r\n                // Note: it's important to handle errors here\r\n                // instead of a catch() block so that we don't swallow\r\n                // exceptions from actual bugs in components.\r\n                (error) => {\r\n                    console.log(error);\r\n                }\r\n            )\r\n\r\n        //if (!res.ok) {\r\n        //    throw Error(`Could not fetch ${this.BasePath}` +\r\n        //        `, received ${res.status}`)\r\n        //}\r\n        return await res;\r\n    }\r\n\r\n    async getAllFilms() {\r\n        const res = await this.getResource('Films');\r\n        return res.results.map(this._transformFilm);\r\n    }\r\n\r\n    async getFilmById(id) {\r\n        const film = await this.getResource(this.Controller, id);\r\n        return this._transformFilm(film);\r\n    }\r\n\r\n    async getRandomFilm() {\r\n        const film = await this.getResource(this.Controller, 'Random');\r\n\r\n        return film;//this._transformFilm(film);\r\n    }\r\n\r\n    _transformFilm(film) {\r\n        return {\r\n                id: film.id,\r\n                title: film.title,\r\n                duaration: film.duaration,\r\n                genre: film.genre,\r\n                description: film.description,\r\n                year: film.year,\r\n                director: film.director,\r\n                urlImg: film.urlImg,\r\n                urlTrailer: film.urlTrailer\r\n        }\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}